<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Registration Page</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<h2>Registration</h2>

<div id="registration-message"></div>

<form id="registration-form">
    <div>
        <label for="firstname">Firstname:</label>
        <input type="text" id="firstname" name="firstname" required autofocus />
    </div>
    <div>
        <label for="lastname">Lastname:</label>
        <input type="text" id="lastname" name="lastname" required autofocus />
    </div>
    <div>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required />
    </div>
    <div>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required />
    </div>
    <div>
        <label for="role">Role:</label>
        <select id="role" name="role">
            <option value="USER">User</option>
            <option value="CANDIDATE">Candidate</option>
        </select>
    </div>
    <div>
        <button type="button" id="register-button">Register</button>
    </div>
    <div>
        <button type="button" id="login-button">Login</button>
    </div>
</form>

<script>
        $(document).ready(function() {
            $('#register-button').click(function() {
                var firstname = $('#firstname').val();
                var lastname = $('#lastname').val();
                var email = $('#email').val();
                var password = $('#password').val();
                var role = $('#role').val();

                var registrationData = {
                    firstname: firstname,
                    lastname: lastname,
                    email: email,
                    password: password,
                    role: role
                };

                $.ajax({
                    url: '/register',
                    type: 'POST',
                    data: JSON.stringify(registrationData),
                    contentType: 'application/json',
                    success: function(response) {
                        $('#registration-message').text("Registration successful!");
                        window.location.href = '/login';
                    },
                    error: function(error) {
                        $('#registration-message').text("Error occurred during registration.");
                    }
                });
            });
            $('#login-button').click(function() {
                // Redirect to the login page or any desired page
                window.location.href = '/';
            });
        });
    </script>
</body>
</html>
